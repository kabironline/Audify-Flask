{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block m_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}
{% block m_content %}
<section class="hero">
  <div class="hero__avatar">
    <!-- TODO: Add Avatar in the databases -->
    <img src="{{ url_for('user_avatar', user_id = user.id)}}" alt="Avatar" class="hero__avatar--img">
    <!-- Get the first character of the user -->
    <!-- <div class="hero__avatar--img">
      {{user.nickname[0]}}
    </div> -->
  </div>
  <div class="hero__details">
    <div class="hero__details--header">
      <div class="hero__details--header">
        <h2 class=" heading-2 hero__details--title">
          {{user.nickname}}
        </h2>
        <p class="hero__details--subtitle">
          @{{user.username}}
        </p>
      </div>
      <!-- TOOD Fix this -->
      {% if own_profile == True %}
      <div class="hero__cta">
        <a href="/edit_profile" class="btn btn--white">
          <i class="fas fa-pen-to-square"></i> Edit Profile
        </a>
      </div>
      {% endif %}
    </div>
    <p class="hero__details--bio">
      BIO: {{user.bio}}
    </p>
  </div>


</section>
<hr class="hr">
{% if recent_tracks != [] %}
<section class="section section-recents section-recents-dashboard">
  <h2 class="heading-2 mb-medium">
    Recently Played
  </h2>
  {% with tracks=recent_tracks %}
  {% include "widgets/track_list.html" %}
  {% endwith %}
</section>
{% endif %}
<section class="section section-playlists">
  <h2 class="heading-2 mb-medium">
    {{ user.nickname }}'s Playlists
  </h2>
  <div class="playlist-container">
    {% for n in range (5)%}
    <div class="playlist__item">
      <a href="/" class=" playlist__link">
        <div class="playlist__details">
          <p class="playlist__heading">Playlist Name</p>
          <p class="playlist__subheading">Playlist Author</p>
        </div>
        <i class="fas fa-circle-play playlist__playbutton"></i>
      </a>
    </div>
    {% endfor %}
  </div>
</section>
<section class="section section-tracks">
  <h2 class="heading-2">
    {{ user.nickname }}'s tracks
  </h2>
  <div class="track-carousel">
    <!-- TODO: GENERATE DYNAMICALLY -->
    {% for n in range(3,10) %}
    <div class="track-carousel__item">
      <div class="track-carousel__item--cover">
        <a href="/" class="">
          <div>
            <img src="https://picsum.photos/200?random={{n}}" alt="track Image" class="track-carousel__item--img">
            <i class="fas fa-play track-carousel__item--play"></i>
          </div>
        </a>
      </div>
      <div class="track-carousel__item--text">
        <a href="" class="track-carousel__item--title">track Title</a>
        <a href="" class="track-carousel__item--artist">Artist</a>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}